(function(e){e.fn.extend({nscroll:function(t,n){if(t&&typeof t=="object"||typeof t=="undefined"){t=e.extend({},e.nscroll.defaults,t)}this.each(function(){new e.nscroll(this,t,n)});return}});e.nscroll=function(t,n,r){function i(r){offset=n.dynamicOffset!=false?e(n.parent).data("newTop")*-1+n.offsetY:n.offsetY;if(e(window).scrollTop()+offset>e(t).data("offset-y")){if(e(window).scrollTop()-e(t).data("offset-y")+offset+e(t).outerHeight()<=e(n.parent).height()-n.offsetY2){var i=e(window).scrollTop()-e(t).data("offset-y")+offset;if(r=="random-speed"){n.speed=Math.floor(Math.random()*1e3+250)}if(n.animate){e(t).stop().data("newTop",i).animate({top:i},n.speed,n.ease,n.callback)}else{e(t).stop().data("newTop",i).css("top",i);n.callback()}}else{var i=e(n.parent).outerHeight()-e(t).outerHeight()-n.offsetY2;if(n.animate){e(t).stop().data("newTop",i).animate({top:i},n.speed,n.ease,n.callback)}else{e(t).stop().data("newTop",i).css("top",i);n.callback()}}}if(e(document).width()<n.minWidth||e(window).scrollTop()+offset<=e(t).data("offset-y")){if(n.animate){e(t).stop().data("newTop",n.offsetY).animate({top:n.offsetY},n.speed,n.ease,n.callback)}else{e(t).stop().data("newTop",n.offsetY).css("top",n.offsetY);n.callback()}}}function s(n){e(t).removeData("offset-y").css("top",0);e(window).unbind("."+e(t).attr(e.expando))}if(n&&typeof n=="string"){if(n=="destroy"){s(r)}return}if(e(t).css("position")!="absolute"&&e(t).css("position")!="relative"){e(t).css("position","relative")}e(t).data("nscroll",true).data("offset-y",e(t).offset().top);if(typeof n.offsetY!="number"){n.offsetY=e(n.offsetY).outerHeight()}e(window).bind("scroll."+e(t).attr(e.expando)+" resize."+e(t).attr(e.expando),function(){i(r)});i(r);var o=function(){var e={};return function(t,n,r){if(!r){r="Don't call this twice without a uniqueId"}if(e[r]){clearTimeout(e[r])}e[r]=setTimeout(t,n)}}()};e.nscroll.defaults={parent:"body",offsetY:0,offsetY2:0,animate:true,speed:"10",ease:"swing",randomizedSpeed:false,dynamicOffset:false,callback:function(){}}})(jQuery)